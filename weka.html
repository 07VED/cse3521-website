<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Weka</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="css/worg.css" type="text/css" media="screen" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012  Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<a href="index.html">Home</a> &nbsp; &nbsp;
          <!-- Plupper Button -->
          <div id="plupperButton" style="display: inline;"></div>
          <!-- End of Plupper Button Code -->
</div>
<div id="content">
<h1 class="title">Weka</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">k-means clustering</a></li>
<li><a href="#sec-2">k-nearest neighbor classification</a></li>
<li><a href="#sec-3">Preprocessing text</a>
<ul>
<li><a href="#sec-3-1">Strings to binary feature vectors</a></li>
<li><a href="#sec-3-2">Strings to frequency vectors</a></li>
<li><a href="#sec-3-3">Strings to tf-idf vectors</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
Download from the <a href="http://www.cs.waikato.ac.nz/ml/weka/">Weka website</a>, click "Download" on the left, and
select one of the "Stable book 3rd ed." versions for your machine.
</p>

<p>
You may need to increase the memory available to Weka. On Windows,
check out <a href="http://weka.wikispaces.com/Java+Virtual+Machine">Weka's page on the topic</a>. On a Mac, use this command in the
Terminal:
</p>

<pre class="example">
java -Xmx4096m -jar /Applications/weka-3-6-8.app/Contents/Resources/Java/weka.jar
</pre>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">k-means clustering</h2>
<div class="outline-text-2" id="text-1">

<div class="figure">
<p><img src="./images/weka-cluster-1.png" alt="weka-cluster-1.png" />
</p>
<p><span class="figure-number">Figure 1:</span> Click "Choose" to choose the clustering algorithm.</p>
</div>


<div class="figure">
<p><img src="./images/weka-cluster-2.png" alt="weka-cluster-2.png" />
</p>
<p><span class="figure-number">Figure 2:</span> Choose "SimpleKMeans."</p>
</div>


<div class="figure">
<p><img src="./images/weka-cluster-3.png" alt="weka-cluster-3.png" />
</p>
<p><span class="figure-number">Figure 3:</span> Click the name of the algorithm to get more options.</p>
</div>


<div class="figure">
<p><img src="./images/weka-cluster-4.png" alt="weka-cluster-4.png" />
</p>
<p><span class="figure-number">Figure 4:</span> Possibly change the number of clusters or distance function.</p>
</div>


<div class="figure">
<p><img src="./images/weka-cluster-5.png" alt="weka-cluster-5.png" />
</p>
<p><span class="figure-number">Figure 5:</span> For evaluation (including the confusion matrix), choose Classes to clusters evaluation and make sure "(Nom) class" (nominal variable called "class") is selected for comparison.</p>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">k-nearest neighbor classification</h2>
<div class="outline-text-2" id="text-2">

<div class="figure">
<p><img src="./images/weka-classify-1.png" alt="weka-classify-1.png" />
</p>
<p><span class="figure-number">Figure 6:</span> Click "Choose" to choose the classification algorithm.</p>
</div>


<div class="figure">
<p><img src="./images/weka-classify-2.png" alt="weka-classify-2.png" />
</p>
<p><span class="figure-number">Figure 7:</span> Choose "IBk."</p>
</div>


<div class="figure">
<p><img src="./images/weka-classify-3.png" alt="weka-classify-3.png" />
</p>
<p><span class="figure-number">Figure 8:</span> Click the name of the algorithm to get more options.</p>
</div>


<div class="figure">
<p><img src="./images/weka-classify-4.png" alt="weka-classify-4.png" />
</p>
<p><span class="figure-number">Figure 9:</span> Possibly change the number of clusters.</p>
</div>


<div class="figure">
<p><img src="./images/weka-classify-5.png" alt="weka-classify-5.png" />
</p>
<p><span class="figure-number">Figure 10:</span> For evaluation (including the confusion matrix), choose "Cross-validation" with 10 folds.</p>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Preprocessing text</h2>
<div class="outline-text-2" id="text-3">
<p>
As discussed in the <a href="./text-classification.html">text classification</a> notes, text files typically
need to be converted into "feature vectors" before machine learning
algorithms can be applied. The most common feature vector is a vector
where each dimension is a different word, and the value in that
dimension is either 0/1 binary value (yes or no the word is in that
document), an integer count (the frequency of the word in that
document), or a real value (often the tf-idf score of that word in
that document).
</p>

<p>
The ARFF files we will be working with will always look like this:
</p>

<pre class="example">
@relation some-description-of-the-data
@attribute contents string
@attribute class {ham,spam}

@data
'Go until jurong point, crazy.. Available only in bugis n great world la e buffet... Cine there got amore wat...',ham
'Ok lar... Joking wif u oni...',ham
'Free entry in 2 a wkly comp to win FA Cup final tkts 21st May 2005. Text FA to 87121 to receive entry question(std txt rate)T&amp;Cs apply 08452810075over18s',spam
'U dun say so early hor... U c already then say...',ham
'Nah I dont think he goes to usf, he lives around here though',ham
...
</pre>

<p>
Of course, the classes (ham/spam) may change. These files are very
easy to generate, should you actually wish to use text classification
for your own purposes.
</p>

<p>
We'll practice with the <a href="./sms-spam.arff">sms-spam.arff</a> file, which has examples of SMS
text msg ham and spam. This collection was produced by Tiago
A. Almeida from the Federal University of Sao Carlos and José María
Gómez Hidalgo from the R&amp;D Department of Optenet. More information
<a href="http://www.dt.fee.unicamp.br/~tiago/smsspamcollection/">available here</a>. You may find <a href="http://dl.acm.org/citation.cfm?id=2034742">their paper</a> interesting; it examines the
performance of various machine learning algorithms on this data set.
</p>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">Strings to binary feature vectors</h3>
<div class="outline-text-3" id="text-3-1">

<div class="figure">
<p><img src="./images/weka-preprocess-1.png" alt="weka-preprocess-1.png" />
</p>
<p><span class="figure-number">Figure 11:</span> Load the ARFF file and choose a filter.</p>
</div>


<div class="figure">
<p><img src="./images/weka-preprocess-2.png" alt="weka-preprocess-2.png" />
</p>
<p><span class="figure-number">Figure 12:</span> Choose the StringToWordVector filter, in the Unsupervised &gt; Attribute section.</p>
</div>


<div class="figure">
<p><img src="./images/weka-preprocess-3.png" alt="weka-preprocess-3.png" />
</p>
<p><span class="figure-number">Figure 13:</span> Click the filter name to get more options.</p>
</div>


<div class="figure">
<p><img src="./images/weka-preprocess-4.png" alt="weka-preprocess-4.png" />
</p>
<p><span class="figure-number">Figure 14:</span> Change "attributeIndices" to "1" to just select the first attribute (the contents of the SMS message). Change "attributeNamePrefix" to "word-" so that all the new features look like "word-foo" and "word-bar", etc. Change "wordsToKeep" to "100000" to keep them all.</p>
</div>


<div class="figure">
<p><img src="./images/weka-preprocess-5.png" alt="weka-preprocess-5.png" />
</p>
<p><span class="figure-number">Figure 15:</span> Click "Apply"</p>
</div>


<div class="figure">
<p><img src="./images/weka-preprocess-6.png" alt="weka-preprocess-6.png" />
</p>
<p><span class="figure-number">Figure 16:</span> Now you'll have lots more attributes. You can click "Undo" if you don't like it.</p>
</div>


<div class="figure">
<p><img src="./images/weka-preprocess-7.png" alt="weka-preprocess-7.png" />
</p>
<p><span class="figure-number">Figure 17:</span> Everything works better if the class (ham/spam) is last. After our filter, it's not anymore. Let's fix that. Choose a new filter, "Reorder," under Unsupervised &gt; Attribute. Click the filter name to change its properties. Type "2-last,1" to make the new order the second-to-last attributes followed by the first attribute. This puts the first attribute at the end.</p>
</div>


<div class="figure">
<p><img src="./images/weka-preprocess-8.png" alt="weka-preprocess-8.png" />
</p>
<p><span class="figure-number">Figure 18:</span> Click "Apply." Now the class (ham/spam) should be the last attribute again.</p>
</div>
</div>
</div>
<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2">Strings to frequency vectors</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Follow the steps above ("Strings to binary feature vectors") except
use the following changes in the StringToWordVector filter:
</p>


<div class="figure">
<p><img src="./images/weka-preprocess-9.png" alt="weka-preprocess-9.png" />
</p>
<p><span class="figure-number">Figure 19:</span> Change "outputWordCounts" to "True."</p>
</div>
</div>
</div>
<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3">Strings to tf-idf vectors</h3>
<div class="outline-text-3" id="text-3-3">
<p>
Follow the steps above ("Strings to binary feature vectors") except
use the following changes in the StringToWordVector filter:
</p>


<div class="figure">
<p><img src="./images/weka-preprocess-10.png" alt="weka-preprocess-10.png" />
</p>
<p><span class="figure-number">Figure 20:</span> Change "IDFTransform" to "True" and "TFTransform" to "True," as well as "normalizeDocLength" to "Normalize all data."</p>
</div>

<div style="font-size: 80%; clear: both;"> <span
xmlns:dct="http://purl.org/dc/terms/"
href="http://purl.org/dc/dcmitype/Text" property="dct:title"
rel="dct:type">Intro to AI material</span> by <a
xmlns:cc="http://creativecommons.org/ns#"
href="http://cse3521.artifice.cc" property="cc:attributionName"
rel="cc:attributionURL">Joshua Eckroth</a> is licensed under a <a
rel="license"
href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons
Attribution-ShareAlike 3.0 Unported License</a>. Source code for this
website available at <a
href="https://github.com/joshuaeckroth/cse3521-website">GitHub</a>.
</div>

<!-- Plupper Tracking Code -->
<script src="https://www.google.com/jsapi"></script>
<script type="text/javascript"
    src="https://static.plupper.com/js/plupper.js"></script>
<script type="text/javascript">
    plupper.init("joshuaeckroth@plupper.com");
    plupper.enableCobrowsing();
</script>
<!-- End of Plupper Tracking Code -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-23971505-3', 'artifice.cc');
  ga('send', 'pageview');

</script>

<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

<script type="text/javascript">
$('.hidden .hidden-content').hide();
$('.hidden > strong').click(function() {
  $(this).parent().find('.hidden-content').toggle();
});
</script>
</div>
</div>
</div>
</div>
</body>
</html>
