<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Prolog examples</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="css/worg.css" type="text/css" media="screen" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<a href="index.html">Home</a>
</div>
<div id="content">
<h1 class="title">Prolog examples</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Fun with lists</a></li>
<li><a href="#sec-2">8-puzzle</a></li>
<li><a href="#sec-3">A maze "game"</a></li>
<li><a href="#sec-4">Constraint logic programming (over finite domains)</a>
<ul>
<li><a href="#sec-4-1">Send more money</a></li>
<li><a href="#sec-4-2">Reverse factorial</a></li>
</ul>
</li>
<li><a href="#sec-5">Sudoku</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Fun with lists</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">Sorted is a sorted version of List if Sorted is</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">a permutation of List (same elements in possibly</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">different order) and Sorted is sorted (second rule).</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">sorted</span>(<span style="color: #000000; background-color: #ffffff;">List</span>, <span style="color: #000000; background-color: #ffffff;">Sorted</span>) :-
    perm(<span style="color: #000000; background-color: #ffffff;">List</span>, <span style="color: #000000; background-color: #ffffff;">Sorted</span>),
    sorted(<span style="color: #000000; background-color: #ffffff;">Sorted</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">A list is sorted if it has zero or one elements,</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">or if it has two or more and they are in the</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">right order (recursively).</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">sorted</span>(<span style="color: #004dd0; background-color: #ffffff;">[]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">sorted</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">sorted</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X</span>,<span style="color: #000000; background-color: #ffffff;">Y</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">Rest</span><span style="color: #004dd0; background-color: #ffffff;">]</span>) :- <span style="color: #000000; background-color: #ffffff;">X</span> =&lt; <span style="color: #000000; background-color: #ffffff;">Y</span>, sorted(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">Y</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">Rest</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">A permutation of a list is one of the elements</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">of the original list stuck at the head of the</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">permuted list, and the rest is a permuted version</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">of the original list without that element.</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">perm</span>(<span style="color: #004dd0; background-color: #ffffff;">[]</span>,<span style="color: #004dd0; background-color: #ffffff;">[]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">perm</span>(<span style="color: #000000; background-color: #ffffff;">List</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">H</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">Perm</span><span style="color: #004dd0; background-color: #ffffff;">]</span>) :-
    delete(<span style="color: #000000; background-color: #ffffff;">H</span>, <span style="color: #000000; background-color: #ffffff;">List</span>, <span style="color: #000000; background-color: #ffffff;">Rest</span>),
    perm(<span style="color: #000000; background-color: #ffffff;">Rest</span>, <span style="color: #000000; background-color: #ffffff;">Perm</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">Delete an element from a list by just not including</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">it when it's found (recursively; like the member rule).</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">delete</span>(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">T</span><span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #000000; background-color: #ffffff;">T</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">delete</span>(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">H</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">T</span><span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">H</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">NT</span><span style="color: #004dd0; background-color: #ffffff;">]</span>) :- delete(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">T</span>, <span style="color: #000000; background-color: #ffffff;">NT</span>).
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">8-puzzle</h2>
<div class="outline-text-2" id="text-2">
<p>
Prolog does depth-first search natively. So, let's exploit that to
solve the 8-puzzle problem.
</p>

<p>
First, we define the goal:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">goal</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span>1,2,3,
      4,0,5,
      6,7,8<span style="color: #004dd0; background-color: #ffffff;">]</span>).
</pre>
</div>

<p>
Now, we define all the possible moves (a bit laboriously):
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">From: http://www-module.cs.york.ac.uk/lpa/prac2009/prolog-lab-3.pdf</span>

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">move left in the top row</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,0,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span>0,<span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,0, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,0,<span style="color: #000000; background-color: #ffffff;">X2</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">move left in the middle row</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,0,<span style="color: #000000; background-color: #ffffff;">X6</span>,<span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, 0,<span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>,<span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,0,<span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,0,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">move left in the bottom row</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,0,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, 0,<span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,0<span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,0,<span style="color: #000000; background-color: #ffffff;">X8</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">move right in the top row </span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span>0,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X2</span>,0,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,0,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>,0, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">move right in the middle row </span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, 0,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X5</span>,0,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,0,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>,0, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">move right in the bottom row</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>,0,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,0,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>,<span style="color: #000000; background-color: #ffffff;">X7</span>,0,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>,<span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X9</span>,0<span style="color: #004dd0; background-color: #ffffff;">]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">move up from the middle row</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, 0,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span>0,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,0,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,0,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,0, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,0, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">move up from the bottom row</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,0,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,0,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,0<span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,0, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X6</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, 0,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, 0,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">move down from the top row</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span>0,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, 0,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,0,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,0,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,0, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,0, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">move down from the middle row</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, 0,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, 0,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,0,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X6</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,0,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">move</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,0, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,<span style="color: #000000; background-color: #ffffff;">X9</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
     <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X1</span>,<span style="color: #000000; background-color: #ffffff;">X2</span>,<span style="color: #000000; background-color: #ffffff;">X3</span>, <span style="color: #000000; background-color: #ffffff;">X4</span>,<span style="color: #000000; background-color: #ffffff;">X5</span>,<span style="color: #000000; background-color: #ffffff;">X9</span>, <span style="color: #000000; background-color: #ffffff;">X7</span>,<span style="color: #000000; background-color: #ffffff;">X8</span>,0<span style="color: #004dd0; background-color: #ffffff;">]</span>).
</pre>
</div>

<p>
Now we can define depth-first search. Since Prolog does this naturally
(it searches for values of variables to make predicates true), we just
need to specify what should happen if the goal is not immediately
found (i.e., a move should be made).
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">dfsSimplest</span>(<span style="color: #000000; background-color: #ffffff;">S</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">S</span><span style="color: #004dd0; background-color: #ffffff;">]</span>) :- goal(<span style="color: #000000; background-color: #ffffff;">S</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">dfsSimplest</span>(<span style="color: #000000; background-color: #ffffff;">S</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">S</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">Rest</span><span style="color: #004dd0; background-color: #ffffff;">]</span>) :- move(<span style="color: #000000; background-color: #ffffff;">S</span>, <span style="color: #000000; background-color: #ffffff;">S2</span>), dfsSimplest(<span style="color: #000000; background-color: #ffffff;">S2</span>, <span style="color: #000000; background-color: #ffffff;">Rest</span>).
</pre>
</div>

<p>
Let's try it with an initial state that is one <i>left</i> move away from
the goal.
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- dfsSimplest(<span style="color: #004dd0; background-color: #ffffff;">[</span>1,2,3, 0,4,5, 6,7,8<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #000000; background-color: #ffffff;">Path</span>).
<span style="color: #000000; background-color: #ffffff;">Path</span> = <span style="color: #004dd0; background-color: #ffffff;">[[</span>1, 2, 3, 0, 4, 5, 6, 7<span style="color: #004dd0; background-color: #ffffff;">|</span>...<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span>1, 2, 3, 4, 0, 5, 6<span style="color: #004dd0; background-color: #ffffff;">|</span>...<span style="color: #004dd0; background-color: #ffffff;">]]</span> .
</pre>
</div>

<p>
Ok, it found the right move (the path lists two boards, the initial
and the goal).
</p>

<p>
If we start with an initial board that is one <i>down</i> move away from
the goal, &#x2026;
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- dfsSimplest(<span style="color: #004dd0; background-color: #ffffff;">[</span>1,2,3, 4,7,5, 6,0,8<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #000000; background-color: #ffffff;">Path</span>).
.... <span style="color: #000000; background-color: #ffffff; font-weight: bold;">get</span> a cup of coffee now?

<span style="color: #000000; background-color: #ffffff;">ERROR</span>: <span style="color: #000000; background-color: #ffffff;">Out</span> of local stack
</pre>
</div>

<p>
Prolog never found the answer. This is because it started with left
moves, then more left moves, etc&#x2026;. If we rearrange the <code>move</code>
predicates so that the up-moves are first, the path is found
immediately again.
</p>

<p>
Apart from rearranging our move predicates, we can also avoid the
problem of searching from the same states more than once. We need to
keep track of "checked" states, so we'll add another parameter to our
predicate:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">dfs</span>(<span style="color: #000000; background-color: #ffffff;">S</span>, <span style="color: #000000; background-color: #ffffff;">Path</span>, <span style="color: #000000; background-color: #ffffff;">Path</span>) :- goal(<span style="color: #000000; background-color: #ffffff;">S</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">dfs</span>(<span style="color: #000000; background-color: #ffffff;">S</span>, <span style="color: #000000; background-color: #ffffff;">Checked</span>, <span style="color: #000000; background-color: #ffffff;">Path</span>) :-
    <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% try a move</span>
    move(<span style="color: #000000; background-color: #ffffff;">S</span>, <span style="color: #000000; background-color: #ffffff;">S2</span>),
    <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% ensure the resulting state is new</span>
    \+member(<span style="color: #000000; background-color: #ffffff;">S2</span>, <span style="color: #000000; background-color: #ffffff;">Checked</span>),
    <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% and that this state leads to the goal</span>
    dfs(<span style="color: #000000; background-color: #ffffff;">S2</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">S2</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">Checked</span><span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #000000; background-color: #ffffff;">Path</span>).
</pre>
</div>

<p>
Let's try it:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- dfs(<span style="color: #004dd0; background-color: #ffffff;">[</span>1,2,3, 0,4,5, 6,7,8<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[]</span>, <span style="color: #000000; background-color: #ffffff;">Path</span>).
<span style="color: #000000; background-color: #ffffff;">Path</span> = <span style="color: #004dd0; background-color: #ffffff;">[[</span>1, 2, 3, 4, 0, 5, 6, 7<span style="color: #004dd0; background-color: #ffffff;">|</span>...<span style="color: #004dd0; background-color: #ffffff;">]]</span> .
</pre>
</div>

<p>
Seems to work with the initial state just one <i>left</i> move from the
goal.
</p>

<p>
Now let's make an initial state one <i>up</i> move from the goal. Recall
that naive DFS ran out of memory (because it continued checking from
repeated states).
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- dfs(<span style="color: #004dd0; background-color: #ffffff;">[</span>1,2,3, 4,7,5, 6,0,8<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[]</span>, <span style="color: #000000; background-color: #ffffff;">Path</span>), length(<span style="color: #000000; background-color: #ffffff;">Path</span>, <span style="color: #000000; background-color: #ffffff;">N</span>).
<span style="color: #000000; background-color: #ffffff;">Path</span> = <span style="color: #004dd0; background-color: #ffffff;">[[</span>1, 2, 3, 4, 0, 5, 6, 7<span style="color: #004dd0; background-color: #ffffff;">|</span>...<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span>1, 2, 3, 0, 4, 5, 6<span style="color: #004dd0; background-color: #ffffff;">|</span>...<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span>0, 2, 3, 1, 4, 5<span style="color: #004dd0; background-color: #ffffff;">|</span>...<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span>2, 0, 3, 1, 4<span style="color: #004dd0; background-color: #ffffff;">|</span>...<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span>2, 3, 0, 1<span style="color: #004dd0; background-color: #ffffff;">|</span>...<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span>2, 3, 5<span style="color: #004dd0; background-color: #ffffff;">|</span>...<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span>2, 3<span style="color: #004dd0; background-color: #ffffff;">|</span>...<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span>2<span style="color: #004dd0; background-color: #ffffff;">|</span>...<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span>...<span style="color: #004dd0; background-color: #ffffff;">|</span>...<span style="color: #004dd0; background-color: #ffffff;">]|</span>...<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #000000; background-color: #ffffff;">N</span> = 23759 .
</pre>
</div>

<p>
23,759 moves (in the <i>solution</i>), when only one move was needed. The
order of predicates in the database can be of critical importance.
</p>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">A maze "game"</h2>
<div class="outline-text-2" id="text-3">
<p>
If you took my CSE 230 class, you'll remember building a maze
game. Rooms were connected to other rooms, and players could walk
through them. Each room had a description, and possibly even monsters
that mocked you as you passed through.
</p>

<p>
Anyway, building such a game in Prolog is trivial (save for the
monsters). Let's start with some room descriptions:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">room</span>(garden, <span style="color: #670088; background-color: #ffffff; font-style: italic;">'Garden'</span>, <span style="color: #670088; background-color: #ffffff; font-style: italic;">'You are in the Garden. The trees and shrubs appear...'</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">room</span>(hallway, <span style="color: #670088; background-color: #ffffff; font-style: italic;">'Hallway'</span>, <span style="color: #670088; background-color: #ffffff; font-style: italic;">'You are in the Hallway. Dusty broken lamps and flower pots...'</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">room</span>(kitchen, <span style="color: #670088; background-color: #ffffff; font-style: italic;">'Kitchen'</span>, <span style="color: #670088; background-color: #ffffff; font-style: italic;">'You are in the kitchen. Knives, pots, pans, ...'</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">room</span>(library, <span style="color: #670088; background-color: #ffffff; font-style: italic;">'Library'</span>, <span style="color: #670088; background-color: #ffffff; font-style: italic;">'You are among many books in the Library...'</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">room</span>(lair, <span style="color: #670088; background-color: #ffffff; font-style: italic;">'Lair'</span>, <span style="color: #670088; background-color: #ffffff; font-style: italic;">'You have found an apparently quite evil lair, of all things...'</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">connected</span>(north, library, hallway).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">connected</span>(south, hallway, library).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">connected</span>(down, library, lair).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">connected</span>(up, lair, library).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">connected</span>(west, library, garden).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">connected</span>(east, garden, library).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">connected</span>(west, hallway, kitchen).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">connected</span>(east, kitchen, hallway).
</pre>
</div>

<p>
We'll add a predicate that causes the description of our room to be
printed:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">this predicate has no inputs</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">print_location</span> :-
    current_room(<span style="color: #000000; background-color: #ffffff;">Current</span>),
    room(<span style="color: #000000; background-color: #ffffff;">Current</span>, <span style="color: #000000; background-color: #ffffff;">Name</span>, <span style="color: #000000; background-color: #ffffff;">Description</span>),
    <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% nl means </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">"newline"</span>
    print(<span style="color: #000000; background-color: #ffffff;">Name</span>), nl, print(<span style="color: #000000; background-color: #ffffff;">Description</span>), nl.
</pre>
</div>

<p>
This predicate requires that <code>current_room</code> is a predicate that gives
the current room. E.g., <code>current_room(library).</code>
</p>

<p>
But the current room should change, naturally. We can change the facts
of the database in the middle of running the program by using
<code>retract</code> and <code>assertz</code>. The <code>retract</code> predicate ("meta-predicate"
technically) takes as input a predicate and removes it from current
facts. On the other hand, <code>assertz</code> adds a predicate to the list of
facts, at the bottom of the list (that's what the <code>z</code> means; the
alternative is to add the new fact at the top, in which case you use
<code>asserta</code>).
</p>

<p>
We have to indicate that the <code>current_room</code> predicate may be changed,
so we put this in our file:
</p>

<div class="org-src-container">

<pre class="src src-prolog">:- <span style="color: #000000; background-color: #ffffff; font-weight: bold;">dynamic</span> <span style="color: #000000; background-color: #ffffff; font-weight: bold;">current_room/1</span>.
</pre>
</div>

<p>
Now we can define a change room predicate:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">change_room</span>(<span style="color: #000000; background-color: #ffffff;">NewRoom</span>) :-
    current_room(<span style="color: #000000; background-color: #ffffff;">Current</span>),
    retract(current_room(<span style="color: #000000; background-color: #ffffff;">Current</span>)),
    assertz(current_room(<span style="color: #000000; background-color: #ffffff;">NewRoom</span>)).
</pre>
</div>

<p>
We'll want user input. Here is a quick &amp; dirty way that supports the
word "go" followed by a direction:
</p>

<div class="org-src-container">

<pre class="src src-prolog">:- <span style="color: #000000; background-color: #ffffff; font-weight: bold;">use_module</span>(library(readln)).

:- prompt(<span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #670088; background-color: #ffffff; font-style: italic;">'Type a command (or '</span><span style="color: #670088; background-color: #ffffff; font-style: italic;">'help</span><span style="color: #670088; background-color: #ffffff; font-style: italic;">''</span><span style="color: #670088; background-color: #ffffff; font-style: italic;">): '</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">strip_punctuation</span>(<span style="color: #004dd0; background-color: #ffffff;">[]</span>, <span style="color: #004dd0; background-color: #ffffff;">[]</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">strip_punctuation</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">Word</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">Tail</span><span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">Word</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">Result</span><span style="color: #004dd0; background-color: #ffffff;">]</span>) :-
    \+(member(<span style="color: #000000; background-color: #ffffff;">Word</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #670088; background-color: #ffffff; font-style: italic;">'.'</span>, <span style="color: #670088; background-color: #ffffff; font-style: italic;">','</span>, <span style="color: #670088; background-color: #ffffff; font-style: italic;">'?'</span>, <span style="color: #670088; background-color: #ffffff; font-style: italic;">'!'</span><span style="color: #004dd0; background-color: #ffffff;">]</span>)),
    strip_punctuation(<span style="color: #000000; background-color: #ffffff;">Tail</span>, <span style="color: #000000; background-color: #ffffff;">Result</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">strip_punctuation</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">Tail</span><span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #000000; background-color: #ffffff;">Result</span>) :-
    strip_punctuation(<span style="color: #000000; background-color: #ffffff;">Tail</span>, <span style="color: #000000; background-color: #ffffff;">Result</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">read_sentence</span>(<span style="color: #000000; background-color: #ffffff;">Input</span>) :-
    <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% this is a special predicate from the readln library</span>
    readln(<span style="color: #000000; background-color: #ffffff;">Input1</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #670088; background-color: #ffffff; font-style: italic;">".!?"</span>, <span style="color: #670088; background-color: #ffffff; font-style: italic;">"_0123456789"</span>, lowercase),
    strip_punctuation(<span style="color: #000000; background-color: #ffffff;">Input1</span>, <span style="color: #000000; background-color: #ffffff;">Input</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">get_input</span> :- read_sentence(<span style="color: #000000; background-color: #ffffff;">Input</span>), get_input(<span style="color: #000000; background-color: #ffffff;">Input</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">get_input</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span>quit<span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">get_input</span>(<span style="color: #000000; background-color: #ffffff;">Input</span>) :-
    process_input(<span style="color: #000000; background-color: #ffffff;">Input</span>), print_location,
    read_sentence(<span style="color: #000000; background-color: #ffffff;">Input1</span>), get_input(<span style="color: #000000; background-color: #ffffff;">Input1</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">process_input</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span>help<span style="color: #004dd0; background-color: #ffffff;">]</span>) :- print(<span style="color: #670088; background-color: #ffffff; font-style: italic;">'Help...'</span>), nl.

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">process_input</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span>go, <span style="color: #000000; background-color: #ffffff;">Direction</span><span style="color: #004dd0; background-color: #ffffff;">]</span>) :-
    current_room(<span style="color: #000000; background-color: #ffffff;">Current</span>),
    connected(<span style="color: #000000; background-color: #ffffff;">Direction</span>, <span style="color: #000000; background-color: #ffffff;">Current</span>, <span style="color: #000000; background-color: #ffffff;">NewRoom</span>),
    change_room(<span style="color: #000000; background-color: #ffffff;">NewRoom</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">process_input</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span>go, <span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>) :-
    print(<span style="color: #670088; background-color: #ffffff; font-style: italic;">'No exit that direction.'</span>), nl.

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">process_input</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>) :-
    print(<span style="color: #670088; background-color: #ffffff; font-style: italic;">'Huh?'</span>), nl, nl.
</pre>
</div>

<p>
Finally, we define a <code>play</code> predicate that starts the whole thing:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">play</span> :-
    retractall(current_room(<span style="color: #000000; background-color: #ffffff;">_</span>)),
    assertz(current_room(library)),
    print_location,
    get_input.
</pre>
</div>

<p>
Here is how we play:
</p>

<pre class="example">
?- play.
Library
You are among many books in the Library...
Type a command (or 'help'): go west.
Garden
You are in the Garden. The trees and shrubs appear...
Type a command (or 'help'): go bizarre.
No exit that direction.
Garden
You are in the Garden. The trees and shrubs appear...
Type a command (or 'help'): help.
Help...
Garden
You are in the Garden. The trees and shrubs appear...
Type a command (or 'help'): go east.
Library
You are among many books in the Library...
Type a command (or 'help'): go down.
Lair
You have found an apparently quite evil lair, of all things...
Type a command (or 'help'): quit.

true
</pre>

<p>
Now, let's make it a little more interesting. Suppose we have switches
that can be toggled, and access to certain rooms requires that certain
switches have been toggled. We'll first indicate that the <code>toggled</code>
predicate is dynamic (will be asserted and retracted):
</p>

<div class="org-src-container">

<pre class="src src-prolog">:- <span style="color: #000000; background-color: #ffffff; font-weight: bold;">dynamic</span> <span style="color: #000000; background-color: #ffffff; font-weight: bold;">toggled/1</span>.
</pre>
</div>

<p>
We'll also add support for typing "toggle switch15" or whatever:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">process_input</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span>toggle, <span style="color: #000000; background-color: #ffffff;">Switch</span><span style="color: #004dd0; background-color: #ffffff;">]</span>) :-
    toggle(<span style="color: #000000; background-color: #ffffff;">Switch</span>),
    <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% retrieve a set of switches that have been toggled</span>
    setof(<span style="color: #000000; background-color: #ffffff;">X</span>, toggled(<span style="color: #000000; background-color: #ffffff;">X</span>), <span style="color: #000000; background-color: #ffffff;">Switches</span>),
    <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% print these</span>
    print(<span style="color: #670088; background-color: #ffffff; font-style: italic;">'Toggled switches: '</span>), print(<span style="color: #000000; background-color: #ffffff;">Switches</span>), nl.

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">process_input</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span>toggle, <span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>) :-
    print(<span style="color: #670088; background-color: #ffffff; font-style: italic;">'Cannot toggle that switch.'</span>), nl.
</pre>
</div>

<p>
We'll have three switches. Switch 1 can be toggled whenever. But
switch 2 requires that switch 1 is already toggled, and switch 3
requires that switch 2 is already toggled.
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">toggle</span>(switch1) :- assertz(toggled(switch1)).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">toggle</span>(switch2) :- toggled(switch1), assertz(toggled(switch2)).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">toggle</span>(switch3) :- toggled(switch2), assertz(toggled(switch3)).
</pre>
</div>

<p>
Finally, let's make the lair only accessible if switch 3 is toggled
(of course, we remove the 'down' connection from the library and
replace it with this one):
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">connected</span>(down, library, lair) :- toggled(switch3).
</pre>
</div>

<p>
And the <code>play</code> predicate is updated to retract all toggle states when
we start the game:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">play</span> :-
    retractall(current_room(<span style="color: #000000; background-color: #ffffff;">_</span>)), retractall(toggled(<span style="color: #000000; background-color: #ffffff;">_</span>)),
    assertz(current_room(library)),
    print_location,
    get_input.
</pre>
</div>

<p>
Let's play!
</p>

<pre class="example">
?- play.
Library
You are among many books in the Library...
Type a command (or 'help'): go down.
No exit that direction.
Library
You are among many books in the Library...
Type a command (or 'help'): toggle switch3.
Cannot toggle that switch.
Library
You are among many books in the Library...
Type a command (or 'help'): toggle switch2.
Cannot toggle that switch.
Library
You are among many books in the Library...
Type a command (or 'help'): toggle switch1.
Toggled switches: [switch1]
Library
You are among many books in the Library...
Type a command (or 'help'): toggle switch2.
Toggled switches: [switch1,switch2]
Library
You are among many books in the Library...
Type a command (or 'help'): toggle switch3.
Toggled switches: [switch1,switch2,switch3]
Library
You are among many books in the Library...
Type a command (or 'help'): go down.
Lair
You have found an apparently quite evil lair, of all things...
Type a command (or 'help'): go up.
Library
You are among many books in the Library...
Type a command (or 'help'): quit.

true
</pre>

<p>
Hopefully you can imagine how the game can be improved from here. For
example, how do we require that switch 1 can only be toggled in the
garden? Hint: the answer involves modifying <code>toggle(switch1)</code>
predicate to include the requirement that the <code>current_room</code> predicate
has a certain value&#x2026;
</p>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Constraint logic programming (over finite domains)</h2>
<div class="outline-text-2" id="text-4">
<p>
The following text is a slightly modified version of a Wikibooks page:
<a href="http://en.wikibooks.org/wiki/Prolog/Constraint_Logic_Programming">http://en.wikibooks.org/wiki/Prolog/Constraint_Logic_Programming</a>
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- <span style="color: #000000; background-color: #ffffff; font-weight: bold;">use_module</span>(library(clpfd)).
</pre>
</div>

<p>
Do you remember how arithmetic in Prolog fails when used with
insufficiently instantiated variables? Try this for a starter:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- <span style="color: #000000; background-color: #ffffff;">X</span> &gt; <span style="color: #000000; background-color: #ffffff;">Y</span>, member(<span style="color: #000000; background-color: #ffffff;">X</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>1,2,3<span style="color: #004dd0; background-color: #ffffff;">]</span>), <span style="color: #000000; background-color: #ffffff;">Y</span>=2.
</pre>
</div>

<p>
Even though there is logically one possible answer to this query
(<code>X=3</code>), Prolog cannot infer it. We can get the right answer by
rearranging the conjuncts of the query:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- member(<span style="color: #000000; background-color: #ffffff;">X</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>1,2,3<span style="color: #004dd0; background-color: #ffffff;">]</span>), <span style="color: #000000; background-color: #ffffff;">Y</span>=2, <span style="color: #000000; background-color: #ffffff;">X</span> &gt; <span style="color: #000000; background-color: #ffffff;">Y</span>.
</pre>
</div>

<p>
CLP(fd) is a lot smarter than Prolog when it comes to arithmetic. Try
this:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- <span style="color: #000000; background-color: #ffffff;">X</span> #&gt; <span style="color: #000000; background-color: #ffffff;">Y</span>, <span style="color: #000000; background-color: #ffffff;">X</span> in 1..3, <span style="color: #000000; background-color: #ffffff;">Y</span>=2.
</pre>
</div>

<p>
This succeeds with the only correct answer, <code>X=3</code>. The predicate
<code>#&gt;/2</code>, when given two variables, posts the constraint that it left
argument should be greater than its right argument. CLP(fd) holds this
constraint in its constraint store until it knows enough about the
variables' possible values to infer further information from it. The
moment that <code>Y</code> gets the value <code>2</code>, CLP(fd) infers that <code>X</code> can only
have the value <code>3</code>.  What happens when we bind <code>Y</code> to <code>1</code> instead?
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- <span style="color: #000000; background-color: #ffffff;">X</span> #&gt; <span style="color: #000000; background-color: #ffffff;">Y</span>, <span style="color: #000000; background-color: #ffffff;">X</span> in 1..3, <span style="color: #000000; background-color: #ffffff;">Y</span>=1.
<span style="color: #000000; background-color: #ffffff;">Y</span> = 1,
<span style="color: #000000; background-color: #ffffff;">X</span> in 2..3.
</pre>
</div>

<p>
Rather than start backtracking over the possible values of <code>X</code>, CLP(fd)
constrains <code>X</code> to a smaller domain and stops. To have CLP(fd) search for
possible assignments to variables, we must tell it do so
explicitly. The simplest way to do that is with the predicate <code>label/1</code>:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- <span style="color: #000000; background-color: #ffffff;">X</span> #&gt; <span style="color: #000000; background-color: #ffffff;">Y</span>, <span style="color: #000000; background-color: #ffffff;">X</span> in 1..3, <span style="color: #000000; background-color: #ffffff;">Y</span>=1, label(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff;">X</span> = 2,
<span style="color: #000000; background-color: #ffffff;">Y</span> = 1 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = 3,
<span style="color: #000000; background-color: #ffffff;">Y</span> = 1.
</pre>
</div>

<p>
What we've seen so far isn't very interesting, because there was only
one constraint variable. Let's have a look at a problem with eight
variables.
</p>
</div>

<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1">Send more money</h3>
<div class="outline-text-3" id="text-4-1">
<p>
The send more money puzzle is the quintessential example of a
constraint problem. It amount to assigning different digits <code>0</code>
through <code>9</code> to the variables <code>[S,E,N,D,M,O,R,Y]</code> such that the sum
</p>

<pre class="example">
   SEND
+  MORE
= MONEY
</pre>

<p>
is solved; <code>S</code> and <code>M</code> should both be greater than zero. Instead of
typing to the Prolog prompt, let's make a proper Prolog source file.
</p>

<div class="org-src-container">

<pre class="src src-prolog">:- <span style="color: #000000; background-color: #ffffff; font-weight: bold;">use_module</span>(library(clpfd)).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">sendmoremoney</span>(<span style="color: #000000; background-color: #ffffff;">Vars</span>) :-
    <span style="color: #000000; background-color: #ffffff;">Vars</span> = <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">S</span>,<span style="color: #000000; background-color: #ffffff;">E</span>,<span style="color: #000000; background-color: #ffffff;">N</span>,<span style="color: #000000; background-color: #ffffff;">D</span>,<span style="color: #000000; background-color: #ffffff;">M</span>,<span style="color: #000000; background-color: #ffffff;">O</span>,<span style="color: #000000; background-color: #ffffff;">R</span>,<span style="color: #000000; background-color: #ffffff;">Y</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
    <span style="color: #000000; background-color: #ffffff;">Vars</span> ins 0..9,
    <span style="color: #000000; background-color: #ffffff;">S</span> #\= 0,
    <span style="color: #000000; background-color: #ffffff;">M</span> #\= 0,
    all_different(<span style="color: #000000; background-color: #ffffff;">Vars</span>),
                 1000*<span style="color: #000000; background-color: #ffffff;">S</span> + 100*<span style="color: #000000; background-color: #ffffff;">E</span> + 10*<span style="color: #000000; background-color: #ffffff;">N</span> + <span style="color: #000000; background-color: #ffffff;">D</span>
    +            1000*<span style="color: #000000; background-color: #ffffff;">M</span> + 100*<span style="color: #000000; background-color: #ffffff;">O</span> + 10*<span style="color: #000000; background-color: #ffffff;">R</span> + <span style="color: #000000; background-color: #ffffff;">E</span>
    #= 10000*<span style="color: #000000; background-color: #ffffff;">M</span> + 1000*<span style="color: #000000; background-color: #ffffff;">O</span> + 100*<span style="color: #000000; background-color: #ffffff;">N</span> + 10*<span style="color: #000000; background-color: #ffffff;">E</span> + <span style="color: #000000; background-color: #ffffff;">Y</span>.
</pre>
</div>

<p>
<code>ins/2</code> is the same as <code>in/2</code>, except that it sets the domains of
several variables at the same time. <code>all_different</code> is logically
equivalent to posting disequality constraints (<code>#\=</code>) on all pairs of
variables in <code>Vars</code>, but is shorter and possibly more efficient. Note
that we can express the sum as one constraint over all eight variables
at the same time. Let's try this out:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- sendmoremoney(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">S</span>,<span style="color: #000000; background-color: #ffffff;">E</span>,<span style="color: #000000; background-color: #ffffff;">N</span>,<span style="color: #000000; background-color: #ffffff;">D</span>,<span style="color: #000000; background-color: #ffffff;">M</span>,<span style="color: #000000; background-color: #ffffff;">O</span>,<span style="color: #000000; background-color: #ffffff;">R</span>,<span style="color: #000000; background-color: #ffffff;">Y</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff;">S</span> = 9,
<span style="color: #000000; background-color: #ffffff;">M</span> = 1,
<span style="color: #000000; background-color: #ffffff;">O</span> = 0,
<span style="color: #000000; background-color: #ffffff;">E</span> in 4..7,
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">all_different</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">E</span>, <span style="color: #000000; background-color: #ffffff;">N</span>, <span style="color: #000000; background-color: #ffffff;">D</span>, <span style="color: #000000; background-color: #ffffff;">R</span>, <span style="color: #000000; background-color: #ffffff;">Y</span>, 0, 1, 9<span style="color: #004dd0; background-color: #ffffff;">]</span>),
1000*9+91*<span style="color: #000000; background-color: #ffffff;">E</span>+ -90*<span style="color: #000000; background-color: #ffffff;">N</span>+<span style="color: #000000; background-color: #ffffff;">D</span>+ -9000*1+ -900*0+10*<span style="color: #000000; background-color: #ffffff;">R</span>+ -1*<span style="color: #000000; background-color: #ffffff;">Y</span>#=0,
<span style="color: #000000; background-color: #ffffff;">N</span> in 5..8,
<span style="color: #000000; background-color: #ffffff;">D</span> in 2..8,
<span style="color: #000000; background-color: #ffffff;">R</span> in 2..8,
<span style="color: #000000; background-color: #ffffff;">Y</span> in 2..8.
</pre>
</div>

<p>
Even without labeling variables, CLP(fd) has inferred the values of
three variables, has simplified the sum and put tighter bounds on the
remaining five variables. Of course, we want values for all our
variables:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- <span style="color: #000000; background-color: #ffffff;">Vars</span>=<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">S</span>,<span style="color: #000000; background-color: #ffffff;">E</span>,<span style="color: #000000; background-color: #ffffff;">N</span>,<span style="color: #000000; background-color: #ffffff;">D</span>,<span style="color: #000000; background-color: #ffffff;">M</span>,<span style="color: #000000; background-color: #ffffff;">O</span>,<span style="color: #000000; background-color: #ffffff;">R</span>,<span style="color: #000000; background-color: #ffffff;">Y</span><span style="color: #004dd0; background-color: #ffffff;">]</span>, sendmoremoney(<span style="color: #000000; background-color: #ffffff;">Vars</span>), label(<span style="color: #000000; background-color: #ffffff;">Vars</span>).
<span style="color: #000000; background-color: #ffffff;">Vars</span> = <span style="color: #004dd0; background-color: #ffffff;">[</span>9, 5, 6, 7, 1, 0, 8, 2<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #000000; background-color: #ffffff;">S</span> = 9,
<span style="color: #000000; background-color: #ffffff;">E</span> = 5,
<span style="color: #000000; background-color: #ffffff;">N</span> = 6,
<span style="color: #000000; background-color: #ffffff;">D</span> = 7,
<span style="color: #000000; background-color: #ffffff;">M</span> = 1,
<span style="color: #000000; background-color: #ffffff;">O</span> = 0,
<span style="color: #000000; background-color: #ffffff;">R</span> = 8,
<span style="color: #000000; background-color: #ffffff;">Y</span> = 2.
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2">Reverse factorial</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Here is an example from some Prolog docs: <a href="http://www.swi-prolog.org/man/clpfd.html">http://www.swi-prolog.org/man/clpfd.html</a>
</p>

<div class="org-src-container">

<pre class="src src-prolog">:- <span style="color: #000000; background-color: #ffffff; font-weight: bold;">use_module</span>(library(clpfd)).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">factorial</span>(0, 1).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">factorial</span>(<span style="color: #000000; background-color: #ffffff;">N</span>, <span style="color: #000000; background-color: #ffffff;">F</span>) :-
        <span style="color: #000000; background-color: #ffffff;">N</span> #&gt; 0,
        <span style="color: #000000; background-color: #ffffff;">N1</span> #= <span style="color: #000000; background-color: #ffffff;">N</span> - 1,
        <span style="color: #000000; background-color: #ffffff;">F</span> #= <span style="color: #000000; background-color: #ffffff;">N</span> * <span style="color: #000000; background-color: #ffffff;">F1</span>,
        factorial(<span style="color: #000000; background-color: #ffffff;">N1</span>, <span style="color: #000000; background-color: #ffffff;">F1</span>).
</pre>
</div>

<p>
The code above is the factorial function, written with constraints. We
can use it in the normal way:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- factorial(5, <span style="color: #000000; background-color: #ffffff;">Fact</span>).
<span style="color: #000000; background-color: #ffffff;">Fact</span> = 120.

?- factorial(12, <span style="color: #000000; background-color: #ffffff;">Fact</span>).
<span style="color: #000000; background-color: #ffffff;">Fact</span> = 479001600.
</pre>
</div>

<p>
But we can also use it in reverse:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- factorial(<span style="color: #000000; background-color: #ffffff;">N</span>, 479001600).
<span style="color: #000000; background-color: #ffffff;">N</span> = 12.
</pre>
</div>

<p>
Or, find out all the possible outputs:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- factorial(<span style="color: #000000; background-color: #ffffff;">N</span>, <span style="color: #000000; background-color: #ffffff;">F</span>).
<span style="color: #000000; background-color: #ffffff;">N</span> = 0,
<span style="color: #000000; background-color: #ffffff;">F</span> = 1 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">N</span> = <span style="color: #000000; background-color: #ffffff;">F</span>, <span style="color: #000000; background-color: #ffffff;">F</span> = 1 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">N</span> = <span style="color: #000000; background-color: #ffffff;">F</span>, <span style="color: #000000; background-color: #ffffff;">F</span> = 2 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">N</span> = 3,
<span style="color: #000000; background-color: #ffffff;">F</span> = 6 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">N</span> = 4,
<span style="color: #000000; background-color: #ffffff;">F</span> = 24 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">N</span> = 5,
<span style="color: #000000; background-color: #ffffff;">F</span> = 120 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">N</span> = 6,
<span style="color: #000000; background-color: #ffffff;">F</span> = 720 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">N</span> = 7,
<span style="color: #000000; background-color: #ffffff;">F</span> = 5040 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">N</span> = 8,
<span style="color: #000000; background-color: #ffffff;">F</span> = 40320 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">N</span> = 9,
<span style="color: #000000; background-color: #ffffff;">F</span> = 362880 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">N</span> = 10,
<span style="color: #000000; background-color: #ffffff;">F</span> = 3628800 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">N</span> = 11,
<span style="color: #000000; background-color: #ffffff;">F</span> = 39916800 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">N</span> = 12,
<span style="color: #000000; background-color: #ffffff;">F</span> = 479001600 ......
</pre>
</div>

<div class="center">

<div class="figure">
<p><img src="./images/compute-all-the-factorials.jpg" alt="compute-all-the-factorials.jpg" />
</p>
</div>
</div>

<div class="org-src-container">

<pre class="src src-prolog">?- findall(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">N</span>, <span style="color: #000000; background-color: #ffffff;">F</span><span style="color: #004dd0; background-color: #ffffff;">]</span>, (<span style="color: #000000; background-color: #ffffff;">N</span> #&lt; 50, factorial(<span style="color: #000000; background-color: #ffffff;">N</span>, <span style="color: #000000; background-color: #ffffff;">F</span>)), <span style="color: #000000; background-color: #ffffff;">SomeFactorials</span>), writeln(<span style="color: #000000; background-color: #ffffff;">SomeFactorials</span>).

<span style="color: #004dd0; background-color: #ffffff;">[[</span>0,1<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>1,1<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>2,2<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>3,6<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>4,24<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>5,120<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>6,720<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>7,5040<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>8,40320<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>9,362880<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>10,3628800<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>11,39916800<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>12,479001600<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>13,6227020800<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>14,87178291200<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>15,1307674368000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>16,20922789888000<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>17,355687428096000<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>18,6402373705728000<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>19,121645100408832000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>20,2432902008176640000<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>21,51090942171709440000<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>22,1124000727777607680000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>23,25852016738884976640000<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>24,620448401733239439360000<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>25,15511210043330985984000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>26,403291461126605635584000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>27,10888869450418352160768000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>28,304888344611713860501504000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>29,8841761993739701954543616000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>30,265252859812191058636308480000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>31,8222838654177922817725562880000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>32,263130836933693530167218012160000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>33,8683317618811886495518194401280000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>34,295232799039604140847618609643520000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,<span style="color: #004dd0; background-color: #ffffff;">[</span>35,10333147966386144929666651337523200000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>36,371993326789901217467999448150835200000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>37,13763753091226345046315979581580902400000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>38,523022617466601111760007224100074291200000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>39,20397882081197443358640281739902897356800000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>40,815915283247897734345611269596115894272000000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>41,33452526613163807108170062053440751665152000000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>42,1405006117752879898543142606244511569936384000000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>43,60415263063373835637355132068513997507264512000000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>44,2658271574788448768043625811014615890319638528000000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>45,119622220865480194561963161495657715064383733760000000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>46,5502622159812088949850305428800254892961651752960000000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>47,258623241511168180642964355153611979969197632389120000000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>48,12413915592536072670862289047373375038521486354677760000000000<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #004dd0; background-color: #ffffff;">[</span>49,608281864034267560872252163321295376887552831379210240000000000<span style="color: #004dd0; background-color: #ffffff;">]]</span>
</pre>
</div>

<p>
So, we wrote a function, then collected (some of) the valid
input/output pairs of that function, just by asking for them. Can your
programming language do that?
</p>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Sudoku</h2>
<div class="outline-text-2" id="text-5">
<p>
The key to solving Sudoku puzzles with Prolog is to use the <code>clpfd</code>
(constraint logic programming over finite domains) library to restrict
the search space to numbers 1-9. Then, it's just a matter of
describing what a solution looks like.
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">need the module </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">"clpfd"</span><span style="color: #00005d; background-color: #ffffff; font-style: italic;"> (constraint logic programming over finite domains)</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">%% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">so that we can specify the range of numbers to search</span>
?- <span style="color: #000000; background-color: #ffffff; font-weight: bold;">use_module</span>(library(clpfd)).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">sudoku</span>(<span style="color: #000000; background-color: #ffffff;">Rows</span>) :-
        length(<span style="color: #000000; background-color: #ffffff;">Rows</span>, 9),  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% ensure there are 9 rows</span>
        maplist(length_(9), <span style="color: #000000; background-color: #ffffff;">Rows</span>),  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% ensure each row has 9 elements (see below for length_)</span>
        append(<span style="color: #000000; background-color: #ffffff;">Rows</span>, <span style="color: #000000; background-color: #ffffff;">Vs</span>),  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% combined all rows into the variable Vs</span>
        <span style="color: #000000; background-color: #ffffff;">Vs</span> ins 1..9,  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% ensure that the elements of Vs should be numbers 1-9</span>
        maplist(all_distinct, <span style="color: #000000; background-color: #ffffff;">Rows</span>),  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% ensure each row is distinct</span>
        transpose(<span style="color: #000000; background-color: #ffffff;">Rows</span>, <span style="color: #000000; background-color: #ffffff;">Columns</span>),  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% flip the matrix</span>
        maplist(all_distinct, <span style="color: #000000; background-color: #ffffff;">Columns</span>),  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% ensure each column is distinct</span>
        <span style="color: #000000; background-color: #ffffff;">Rows</span> = <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">A</span>,<span style="color: #000000; background-color: #ffffff;">B</span>,<span style="color: #000000; background-color: #ffffff;">C</span>,<span style="color: #000000; background-color: #ffffff;">D</span>,<span style="color: #000000; background-color: #ffffff;">E</span>,<span style="color: #000000; background-color: #ffffff;">F</span>,<span style="color: #000000; background-color: #ffffff;">G</span>,<span style="color: #000000; background-color: #ffffff;">H</span>,<span style="color: #000000; background-color: #ffffff;">I</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% create variables A-I for each row</span>
        blocks(<span style="color: #000000; background-color: #ffffff;">A</span>, <span style="color: #000000; background-color: #ffffff;">B</span>, <span style="color: #000000; background-color: #ffffff;">C</span>),  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% make sure all values in these three rows (three 3x3 blocks) are distinct</span>
        blocks(<span style="color: #000000; background-color: #ffffff;">D</span>, <span style="color: #000000; background-color: #ffffff;">E</span>, <span style="color: #000000; background-color: #ffffff;">F</span>),  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% ... and these rows/blocks</span>
        blocks(<span style="color: #000000; background-color: #ffffff;">G</span>, <span style="color: #000000; background-color: #ffffff;">H</span>, <span style="color: #000000; background-color: #ffffff;">I</span>).  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% ... and these rows/blocks</span>

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">length_</span>(<span style="color: #000000; background-color: #ffffff;">L</span>, <span style="color: #000000; background-color: #ffffff;">Ls</span>) :- length(<span style="color: #000000; background-color: #ffffff;">Ls</span>, <span style="color: #000000; background-color: #ffffff;">L</span>).  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% version of length that's easierto use with maplist (above)</span>

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">this predicate ensures a </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">"block"</span><span style="color: #00005d; background-color: #ffffff; font-style: italic;"> (3x3 grid) contains only distinct values</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">blocks</span>(<span style="color: #004dd0; background-color: #ffffff;">[]</span>, <span style="color: #004dd0; background-color: #ffffff;">[]</span>, <span style="color: #004dd0; background-color: #ffffff;">[]</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">blocks</span>(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">A</span>,<span style="color: #000000; background-color: #ffffff;">B</span>,<span style="color: #000000; background-color: #ffffff;">C</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">Bs1</span><span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">D</span>,<span style="color: #000000; background-color: #ffffff;">E</span>,<span style="color: #000000; background-color: #ffffff;">F</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">Bs2</span><span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">G</span>,<span style="color: #000000; background-color: #ffffff;">H</span>,<span style="color: #000000; background-color: #ffffff;">I</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">Bs3</span><span style="color: #004dd0; background-color: #ffffff;">]</span>) :-
        all_distinct(<span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">A</span>,<span style="color: #000000; background-color: #ffffff;">B</span>,<span style="color: #000000; background-color: #ffffff;">C</span>,<span style="color: #000000; background-color: #ffffff;">D</span>,<span style="color: #000000; background-color: #ffffff;">E</span>,<span style="color: #000000; background-color: #ffffff;">F</span>,<span style="color: #000000; background-color: #ffffff;">G</span>,<span style="color: #000000; background-color: #ffffff;">H</span>,<span style="color: #000000; background-color: #ffffff;">I</span><span style="color: #004dd0; background-color: #ffffff;">]</span>),
        blocks(<span style="color: #000000; background-color: #ffffff;">Bs1</span>, <span style="color: #000000; background-color: #ffffff;">Bs2</span>, <span style="color: #000000; background-color: #ffffff;">Bs3</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">problem</span>(<span style="color: #004dd0; background-color: #ffffff;">[[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,3,<span style="color: #000000; background-color: #ffffff;">_</span>,8,5<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,1,<span style="color: #000000; background-color: #ffffff;">_</span>,2,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,5,<span style="color: #000000; background-color: #ffffff;">_</span>,7,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,4,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,1,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,9,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span>5,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,7,3<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,2,<span style="color: #000000; background-color: #ffffff;">_</span>,1,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,4,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,9<span style="color: #004dd0; background-color: #ffffff;">]]</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">problem</span>(<span style="color: #004dd0; background-color: #ffffff;">[[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,3,<span style="color: #000000; background-color: #ffffff;">_</span>,8,5<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,9,<span style="color: #000000; background-color: #ffffff;">_</span>,2,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,5,<span style="color: #000000; background-color: #ffffff;">_</span>,7,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,4,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,9,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,1,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span>5,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,7,3<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,2,<span style="color: #000000; background-color: #ffffff;">_</span>,9,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,4,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,1<span style="color: #004dd0; background-color: #ffffff;">]]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">top-left of:</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">http://puzzles.about.com/library/sudoku/blprsudokuh16.htm</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">problem</span>(<span style="color: #004dd0; background-color: #ffffff;">[[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,8,4,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,9<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,1,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,5<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span>8,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,2,1,4,6,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span>7,<span style="color: #000000; background-color: #ffffff;">_</span>,8,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,9,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,5,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,3,<span style="color: #000000; background-color: #ffffff;">_</span>,1<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,2,4,9,1,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,7<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span>9,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,5,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span>3,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,8,4,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">from:</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">http://www.jibble.org/impossible-sudoku/</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">problem</span>(<span style="color: #004dd0; background-color: #ffffff;">[[</span><span style="color: #000000; background-color: #ffffff;">_</span>,7,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,6,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span>9,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,4,1<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,8,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,9,<span style="color: #000000; background-color: #ffffff;">_</span>,5,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,9,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,7,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,2<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,3,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,8,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span>4,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,8,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,1,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,8,<span style="color: #000000; background-color: #ffffff;">_</span>,3,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,9,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span>1,6,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,7<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,5,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,8,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">from:</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">http://www.guardian.co.uk/</span><span style="color: #000000; background-color: #ffffff; font-weight: bold; font-style: italic;">media/2010</span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">/</span><span style="color: #000000; background-color: #ffffff; font-weight: bold; font-style: italic;">aug/23</span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">/worlds-hardest-sudoku-solution?INTCMP=SRCH#_</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">problem</span>(<span style="color: #004dd0; background-color: #ffffff;">[[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,5,3,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span>8,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,2,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,7,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,1,<span style="color: #000000; background-color: #ffffff;">_</span>,5,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span>4,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,5,3,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,1,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,7,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,6<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,3,2,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,8,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,6,<span style="color: #000000; background-color: #ffffff;">_</span>,5,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,9<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,4,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,3,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,9,7,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]]</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">problem</span>(<span style="color: #004dd0; background-color: #ffffff;">[[</span><span style="color: #000000; background-color: #ffffff;">_</span>,3,1,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,8,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,2,<span style="color: #000000; background-color: #ffffff;">_</span>,7,<span style="color: #000000; background-color: #ffffff;">_</span>,9,<span style="color: #000000; background-color: #ffffff;">_</span>,4<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,6,8,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,6,1,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span>6,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,2,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,3<span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,4,5,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,1,2,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span>7,<span style="color: #000000; background-color: #ffffff;">_</span>,5,<span style="color: #000000; background-color: #ffffff;">_</span>,3,<span style="color: #000000; background-color: #ffffff;">_</span>,8,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>,
          <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,9,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">_</span>,6,3,<span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]]</span>).


<span style="color: #000000; background-color: #ffffff; font-weight: bold;">solve_problems</span> :-
        problem(<span style="color: #000000; background-color: #ffffff;">Rows</span>),
        statistics(runtime, <span style="color: #000000; background-color: #ffffff;">_</span>),  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% builtin function, establishes </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">"runtime"</span><span style="color: #00005d; background-color: #ffffff; font-style: italic;"> variable</span>
        sudoku(<span style="color: #000000; background-color: #ffffff;">Rows</span>),  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% solve the puzzle</span>
        maplist(writeln, <span style="color: #000000; background-color: #ffffff;">Rows</span>),  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% show the solution (writeln, i.e., println each row)</span>
        statistics(runtime, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span>,<span style="color: #000000; background-color: #ffffff;">T</span><span style="color: #004dd0; background-color: #ffffff;">]</span>),  <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% use </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">"runtime"</span><span style="color: #00005d; background-color: #ffffff; font-style: italic;"> variable to compute total time</span>
        write(<span style="color: #670088; background-color: #ffffff; font-style: italic;">'CPU time = '</span>), write(<span style="color: #000000; background-color: #ffffff;">T</span>), write(<span style="color: #670088; background-color: #ffffff; font-style: italic;">' msec'</span>), nl, nl, false. <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% write total time</span>
</pre>
</div>

<div style="font-size: 80%; clear: both;"> <span
xmlns:dct="http://purl.org/dc/terms/"
href="http://purl.org/dc/dcmitype/Text" property="dct:title"
rel="dct:type">Intro to AI material</span> by <a
xmlns:cc="http://creativecommons.org/ns#"
href="http://cse3521.artifice.cc" property="cc:attributionName"
rel="cc:attributionURL">Joshua Eckroth</a> is licensed under a <a
rel="license"
href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons
Attribution-ShareAlike 3.0 Unported License</a>. Source code for this
website available at <a
href="https://github.com/joshuaeckroth/cse3521-website">GitHub</a>.
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-23971505-3', 'artifice.cc');
  ga('send', 'pageview');

</script>

<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

<script type="text/javascript">
$('.hidden .hidden-content').hide();
$('.hidden > strong').click(function() {
  $(this).parent().find('.hidden-content').toggle();
});
</script>
</div>
</div>
</div>
</body>
</html>
