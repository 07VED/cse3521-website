<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Prolog</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="css/worg.css" type="text/css" media="screen" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<a href="index.html">Home</a>
</div>
<div id="content">
<h1 class="title">Prolog</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Some quick concepts and examples</a></li>
<li><a href="#sec-2">Defining complex predicates (rules)</a></li>
<li><a href="#sec-3">Negation as failure</a></li>
<li><a href="#sec-4">Lists in Prolog</a></li>
<li><a href="#sec-5">Prolog for databases</a></li>
<li><a href="#sec-6">Prolog by other names</a></li>
</ul>
</div>
</div>
<p>
Knowledge databases that you might build with
<a href="./first-order-logic.html">first-order logic</a> suffer from a
fatal problem: the logic is so sophisticated that finding answers
efficiently (or even finding an answer at all) becomes difficult or
impossible. First-order logic is so powerful that it can express almost
anything, including very tricky or paradoxical statements. It's not easy
to design algorithms to work with such systems.
</p>

<p>
Prolog is a programming language that allows us to "program" with
declarative knowledge. It puts limitations on the kinds of logical
statements we can write. These limitations are essential for allowing
Prolog programs to work efficiently and always provide an answer (or
determine there is no answer).
</p>

<p>
Because Prolog is a "Turing-complete" language, we can write any program
in Prolog. Of course, a program that is easy to write in Java or C++ will,
in all likelihood, be <i>very</i> difficult to write in Prolog, although it
is possible. Prolog programs often feel like they're programs written in
"reverse," since they are written declaratively rather than procedurally.
</p>

<p>
(Note: Download and install
<a href="http://www.swi-prolog.org/download/stable">SWI Prolog</a>; you may
also want <a href="http://sewiki.iai.uni-bonn.de/research/pdt/start">PDT</a>
for Eclipse. The CSE Linux servers do not have Prolog; that is
ok, you should still submit from Linux but otherwise test your
code on your own machine. There is also the option to download a
<a href="http://portableapps.com/node/23749">portable version of SWI Prolog</a>
to install on a USB key and use in any Windows machine you'd like,
such as the campus lab computers.)
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Some quick concepts and examples</h2>
<div class="outline-text-2" id="text-1">
<p>
There is probably no better way to introduce Prolog than to show some
examples. But first, a few important notes:
</p>

<ul class="org-ul">
<li>Prolog programs have two parts: a database (of facts and rules),
and an interactive "query" tool; the database must be typed into a
file.
</li>

<li>Prolog databases are "consulted" (loaded), and then the query tool
is used to "make queries" (ask questions) about the database.
</li>

<li>How queries are answered is generally beyond the control of the
programmer; Prolog uses a depth-first search to figure out how to
answer queries; this is (generally) non-negotiable.
</li>

<li>"Programs" written in Prolog are "executed" by performing queries.
</li>
</ul>

<p>
Let's make a database by creating some facts:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">parent</span>(tom, liz).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">parent</span>(bob, ann).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">parent</span>(bob, pat).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">parent</span>(pat, jim).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">female</span>(pam).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">male</span>(tom).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">male</span>(bob).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">female</span>(liz).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">female</span>(pat).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">female</span>(ann).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">male</span>(jim).
</pre>
</div>

<p>
We type that into a file, maybe named <code>family.pl</code>, and "consult" the
file in the query tool.
</p>

<p>
Now what? Well, we can ask questions:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- female(pam).
true.
</pre>
</div>

<p>
Ok, it's true that <code>pam</code> is a female.
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- parent(pat, ann).
false.
</pre>
</div>

<p>
Right, <code>pat</code> is not <code>ann</code>'s parent.
</p>

<p>
Now let's use variables. Variables always start with capital
letters. Objects (like <code>pam</code>) must not.
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- parent(<span style="color: #000000; background-color: #ffffff;">X</span>, ann).
<span style="color: #000000; background-color: #ffffff;">X</span> = bob.
</pre>
</div>

<p>
So Prolog has found an assignment for <code>X</code> that makes the statement
true. We call <code>parent</code> a predicate (a 2-ary predicate because it
accepts two inputs), and we always write queries by first stating a
predicate.
</p>

<p>
Let's ask, "Who are all the parents?"
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- parent(<span style="color: #000000; background-color: #ffffff;">P</span>, <span style="color: #000000; background-color: #ffffff;">C</span>).
<span style="color: #000000; background-color: #ffffff;">P</span> = tom,
<span style="color: #000000; background-color: #ffffff;">C</span> = liz <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">P</span> = bob,
<span style="color: #000000; background-color: #ffffff;">C</span> = ann <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">P</span> = bob,
<span style="color: #000000; background-color: #ffffff;">C</span> = pat <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">P</span> = pat,
<span style="color: #000000; background-color: #ffffff;">C</span> = jim.
</pre>
</div>

<p>
(I typed the <code>;</code> &#x2014; we type that to get the next answer.)
</p>

<p>
If I don't actually care who the children are, I can replace <code>C</code> with
<code>_</code> like so:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- parent(<span style="color: #000000; background-color: #ffffff;">P</span>, <span style="color: #000000; background-color: #ffffff;">_</span>).
<span style="color: #000000; background-color: #ffffff;">P</span> = tom <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">P</span> = bob <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">P</span> = bob <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">P</span> = pat.
</pre>
</div>

<p>
We get <code>bob</code> twice because he's the parent of two people.
</p>

<p>
Now let's ask, "Who are the female parents?"
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- parent(<span style="color: #000000; background-color: #ffffff;">P</span>, <span style="color: #000000; background-color: #ffffff;">_</span>), female(<span style="color: #000000; background-color: #ffffff;">P</span>).
<span style="color: #000000; background-color: #ffffff;">P</span> = pat.
</pre>
</div>

<p>
The comma means "AND." So the query requires that <code>P</code> is a parent and
a female.
</p>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Defining complex predicates (rules)</h2>
<div class="outline-text-2" id="text-2">
<p>
The predicates shown above (<code>parent</code>, <code>male</code>, and <code>female</code>) are always
true. They are called "facts."
</p>

<p>
A "rule," instead, is true only when some conditions are met. These
conditions look like the last query above: they typically require
several predicates to be true. The last query above is basically what
defines a "mother." Let's make a rule (in our database file,
<code>family.pl</code>):
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">mother</span>(<span style="color: #000000; background-color: #ffffff;">X</span>) :- parent(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">_</span>), female(<span style="color: #000000; background-color: #ffffff;">X</span>).
</pre>
</div>

<p>
Now for fathers. In the database, we add:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">father</span>(<span style="color: #000000; background-color: #ffffff;">X</span>) :- parent(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">_</span>), male(<span style="color: #000000; background-color: #ffffff;">X</span>).
</pre>
</div>

<p>
Why the <code>false</code> at the end? The <code>;</code> basically means "throw away the
answer you just gave, and try again." Prolog finds a parent <code>X</code>
(probably <code>pat</code>), but then that <code>X</code> does not satisfy the second part
of the <code>father</code> rule, which is written <code>male(X)</code>, so the answer is
<code>false</code> for that <code>X</code>.
</p>

<p>
Notice that <code>pat</code> is the parent of <code>jim</code> and <code>bob</code> is the parent of
<code>pat</code>. That makes <code>bob</code> a grandparent. Let's write a query to that
effect:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- parent(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">Y</span>), parent(<span style="color: #000000; background-color: #ffffff;">Y</span>, <span style="color: #000000; background-color: #ffffff;">_</span>).
<span style="color: #000000; background-color: #ffffff;">X</span> = bob,
<span style="color: #000000; background-color: #ffffff;">Y</span> = pat.
</pre>
</div>

<p>
See? <code>bob</code> is a grandparent. Let's make a rule:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">grandparent</span>(<span style="color: #000000; background-color: #ffffff;">X</span>) :- parent(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">Y</span>), parent(<span style="color: #000000; background-color: #ffffff;">Y</span>, <span style="color: #000000; background-color: #ffffff;">_</span>).
</pre>
</div>

<p>
And here are two queries:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- grandparent(bob).
true.

?- grandparent(jim).
false.
</pre>
</div>

<p>
Let's try defining the sister relationship:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">sister</span>(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">Y</span>) :- parent(<span style="color: #000000; background-color: #ffffff;">Z</span>, <span style="color: #000000; background-color: #ffffff;">X</span>), parent(<span style="color: #000000; background-color: #ffffff;">Z</span>, <span style="color: #000000; background-color: #ffffff;">Y</span>), female(<span style="color: #000000; background-color: #ffffff;">X</span>), female(<span style="color: #000000; background-color: #ffffff;">Y</span>).
</pre>
</div>

<p>
And some queries:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- sister(ann, pat).
true.

?- sister(bob, pat).
false.

?- sister(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">Y</span>).
<span style="color: #000000; background-color: #ffffff;">X</span> = <span style="color: #000000; background-color: #ffffff;">Y</span>, <span style="color: #000000; background-color: #ffffff;">Y</span> = liz <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = <span style="color: #000000; background-color: #ffffff;">Y</span>, <span style="color: #000000; background-color: #ffffff;">Y</span> = ann <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = ann,
<span style="color: #000000; background-color: #ffffff;">Y</span> = pat <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = pat,
<span style="color: #000000; background-color: #ffffff;">Y</span> = ann <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = <span style="color: #000000; background-color: #ffffff;">Y</span>, <span style="color: #000000; background-color: #ffffff;">Y</span> = pat <span style="color: #004dd0; background-color: #ffffff;">;</span>
false.
</pre>
</div>

<p>
What does <code>X = Y, Y = liz</code> mean? It means <code>liz</code> is, apparently, her
own sister:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- sister(liz, liz).
true.
</pre>
</div>

<p>
Let's prevent that by adding another clause to the <code>sister</code> predicate
(<code>\=</code> means "not equal"):
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">sister</span>(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">Y</span>) :- parent(<span style="color: #000000; background-color: #ffffff;">Z</span>, <span style="color: #000000; background-color: #ffffff;">X</span>), parent(<span style="color: #000000; background-color: #ffffff;">Z</span>, <span style="color: #000000; background-color: #ffffff;">Y</span>), female(<span style="color: #000000; background-color: #ffffff;">X</span>), female(<span style="color: #000000; background-color: #ffffff;">Y</span>), <span style="color: #000000; background-color: #ffffff;">X</span> \= <span style="color: #000000; background-color: #ffffff;">Y</span>.
</pre>
</div>

<p>
Now, we get the correct behavior:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- sister(liz, liz).
false.

?- sister(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">Y</span>).
<span style="color: #000000; background-color: #ffffff;">X</span> = ann,
<span style="color: #000000; background-color: #ffffff;">Y</span> = pat <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = pat,
<span style="color: #000000; background-color: #ffffff;">Y</span> = ann <span style="color: #004dd0; background-color: #ffffff;">;</span>
false.
</pre>
</div>

<p>
These rules are essentially the following logical statements:
</p>

<p>
$$(\forall x)(\exists y)((Parent(x, y) \wedge Female(x)) \rightarrow
Mother(x))$$
</p>

<p>
$$(\forall x)(\exists y)((Parent(x, y) \wedge Male(x)) \rightarrow
Father(x))$$
</p>

<p>
$$(\forall x)(\exists y)(\exists z)((Parent(x, y) \wedge Parent(y, z))
\rightarrow Grandparent(x))$$
</p>

<p>
$$(\forall x)(\forall y)(\exists z)((Parent(z, x) \wedge Parent(z, y)
\wedge Female(x) \wedge Female(y) \wedge x \neq y)
\rightarrow Sister(x, y))$$
</p>

<p>
Notice how they all have the same form. Essentially, the variables in
the rule (<code>X</code> or both <code>X</code> and <code>Y</code> in each of these cases) have a
\(\forall\) in front (because the rule is true for all variables <code>X</code> or
<code>X</code> and <code>Y</code>, should certain conditions hold), and the variables inside
the rule have \(\exists\) in front because you only need to find one
value for each variable to make the rule true. Notice we have
\(\rightarrow\) not \(\leftrightarrow\) because there may be more than one
way to satisfy a rule. For example,
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">engineer</span>(<span style="color: #000000; background-color: #ffffff;">X</span>) :- mechanical_engineer(<span style="color: #000000; background-color: #ffffff;">X</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">engineer</span>(<span style="color: #000000; background-color: #ffffff;">X</span>) :- chemical_engineer(<span style="color: #000000; background-color: #ffffff;">X</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">engineer</span>(<span style="color: #000000; background-color: #ffffff;">X</span>) :- electrical_engineer(<span style="color: #000000; background-color: #ffffff;">X</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">etc. etc.</span>
</pre>
</div>

<p>
This is how we do "or" in Prolog: we make new rules. In each rule, we
use commas for "and," but (generally) do not write "or" inside a rule.
</p>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Negation as failure</h2>
<div class="outline-text-2" id="text-3">
<p>
Negation is a little bit funny in Prolog. That's because negation is a
little bit funny in life. How does anyone prove a negative statement?
"I never read that book" &#x2014; how can that be proved?
</p>

<p>
Let's say we want a predicate like "this person is not a father."
Well, we know how to figure out who <i>is</i> a father: we have the
<code>father</code> rule. How can we define a "is not a father" rule?
</p>

<p>
The first thing to note is Prolog does not allow us to use negatives
in facts. We cannot write "not father(jim)."
</p>

<p>
Instead, to prove a negative in Prolog, we use a little trick: we
assume everything stated in the database is <i>everything that exists</i>
(this is the "closed-world assumption"). Anything not stated in the
database does not exist. So, we can "prove" that <code>jim</code> is not a father
by <i>failing</i> to prove that <code>jim</code> is a father (with our <code>father</code> rule).
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">not_a_father</span>(<span style="color: #000000; background-color: #ffffff;">X</span>) :- \+father(<span style="color: #000000; background-color: #ffffff;">X</span>).
</pre>
</div>

<p>
Some queries:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- not_a_father(bob).
false.

?- not_a_father(jim).
true.
</pre>
</div>

<p>
The <code>\+</code> is the "negation operator." The idea is that <code>\+father(X)</code> is
true whenever <code>father(X)</code> fails to be proved (recall that Prolog may
search <i>every possibility</i> in order to prove something; thus, negation
can be computationally expensive).
</p>

<p>
We cannot use <code>\+</code> on the left-side of a rule or written as a fact
because it makes no sense to say, "this will fail to be proven
always." Only positive statements can be on the left of a rule or
written as a fact.
</p>

<p>
This connection between "failing to prove" and "negation" is called
"negation as failure." Negation as failure means, "proving the
negation of something is equivalent to failing to prove that
something" and depends on a closed-world assumption.
</p>

<blockquote>
<p>
<b>negation-as-failure</b> <i>Also</i> <b>negation-by-failure</b> <i>n.</i> <i>Logic
programming</i> <b>1</b> The reasonable assumption that <i>P</i> is false if one
has failed to prove that <i>P</i> is true. <b>2</b> The unreasonable assumption
that <i>P</i> is false if others have failed to prove that <i>P</i> is true. <b>3</b>
<i>Drugs</i> The ineffectiveness of the "Just Say No!" campaign. &#x2014; <i>The
computer contradictionary</i>
</p>
</blockquote>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Lists in Prolog</h2>
<div class="outline-text-2" id="text-4">
<p>
Besides atoms (<code>ann</code>, <code>pat</code>, <code>bob</code>, etc.) we can create lists. Let's
make a simple predicate that says whether or not something is at the
head (front) of a list:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">head</span>(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).
</pre>
</div>

<p>
The code <code>[X|_]</code> means there is a list that starts with <code>X</code> and the
rest (after the <code>|</code>) I don't care about (hence the <code>_</code>). Here are some
uses of this predicate:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- head(a, <span style="color: #004dd0; background-color: #ffffff;">[</span>a, b, c<span style="color: #004dd0; background-color: #ffffff;">]</span>).
true.

?- head(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span>a, b, c<span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff;">X</span> = a.

?- head(a, <span style="color: #000000; background-color: #ffffff;">X</span>).
<span style="color: #000000; background-color: #ffffff;">X</span> = <span style="color: #004dd0; background-color: #ffffff;">[</span>a<span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">_G228</span><span style="color: #004dd0; background-color: #ffffff;">]</span>.
</pre>
</div>

<p>
The <code>_G228</code> is a variable that Prolog created to represent the rest of
the list; it has made no commitment about what <code>_G228</code> is, hence it
can only describe it as variable <code>_G228</code>.
</p>

<p>
Predicates can be recursive, which is exactly what is needed for the
membership predicate:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">X is a member of a list if the list only has the element X in it</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">member</span>(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">X is a member of a list if the list starts with X</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">(technically, the above statement is not needed; this</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">statement suffices)</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">member</span>(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">X</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">]</span>).

<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">Finally, X is a member of a list if it's a member of</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">the tail of the list</span>
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">member</span>(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_</span><span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">Tail</span><span style="color: #004dd0; background-color: #ffffff;">]</span>) :- member(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">Tail</span>).
</pre>
</div>

<p>
Example usage (I'm typing <code>.</code> after some responses because I don't
want other possible answers):
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- member(a, <span style="color: #004dd0; background-color: #ffffff;">[</span>a<span style="color: #004dd0; background-color: #ffffff;">]</span>).
true .

?- member(a, <span style="color: #004dd0; background-color: #ffffff;">[</span>a, b, c<span style="color: #004dd0; background-color: #ffffff;">]</span>).
true .

?- member(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #004dd0; background-color: #ffffff;">[</span>a, b, c<span style="color: #004dd0; background-color: #ffffff;">]</span>).
<span style="color: #000000; background-color: #ffffff;">X</span> = a <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = b <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = c .

?- member(a, <span style="color: #000000; background-color: #ffffff;">X</span>).
<span style="color: #000000; background-color: #ffffff;">X</span> = <span style="color: #004dd0; background-color: #ffffff;">[</span>a<span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">_G231</span><span style="color: #004dd0; background-color: #ffffff;">]</span> <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_G230</span>, a<span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">_G234</span><span style="color: #004dd0; background-color: #ffffff;">]</span> <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_G230</span>, <span style="color: #000000; background-color: #ffffff;">_G233</span>, a<span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">_G237</span><span style="color: #004dd0; background-color: #ffffff;">]</span> <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_G230</span>, <span style="color: #000000; background-color: #ffffff;">_G233</span>, <span style="color: #000000; background-color: #ffffff;">_G236</span>, a<span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">_G240</span><span style="color: #004dd0; background-color: #ffffff;">]</span> <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = <span style="color: #004dd0; background-color: #ffffff;">[</span><span style="color: #000000; background-color: #ffffff;">_G230</span>, <span style="color: #000000; background-color: #ffffff;">_G233</span>, <span style="color: #000000; background-color: #ffffff;">_G236</span>, <span style="color: #000000; background-color: #ffffff;">_G239</span>, a<span style="color: #004dd0; background-color: #ffffff;">|</span><span style="color: #000000; background-color: #ffffff;">_G243</span><span style="color: #004dd0; background-color: #ffffff;">]</span> .
</pre>
</div>

<p>
In that last case, Prolog is <i>generating</i> lists that have <code>a</code> as a
member somewhere. Pretty weird, huh? It's finding some way to make the
predicate true.
</p>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Prolog for databases</h2>
<div class="outline-text-2" id="text-5">
<p>
Now we'll investigate using Prolog for representing and answering
queries about data. Let's build a database of people and families. We
want to say that certain people are born on certain dates, have jobs
with particular incomes, are married, have children, etc.
</p>

<p>
We'll start with a predicate, <code>family</code>, that says a family is made up
of an ID (a number), two parents, and zero-or-more children (a
list). Each person has a first name and last name, birth date, and is
either unemployed or has a job with a particular salary.
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">family</span>(10392,
       person(tom, fox, born(7, may, 1960), works(cnn, 152000)),
       person(ann, fox, born(19, april, 1961), works(nyu, 65000)),
       <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% here are the children...</span>
       <span style="color: #004dd0; background-color: #ffffff;">[</span>person(pat, fox, born(5, october, 1983), unemployed),
        person(jim, fox, born(1, june, 1986), unemployed),
        person(amy, fox, born(17, december, 1990), unemployed)<span style="color: #004dd0; background-color: #ffffff;">]</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">family</span>(38463, 
       person(susan, rothchild, born(13, september, 1972), works(osu, 75000)),
       person(jess, rothchild, born(20, july, 1975), works(nationwide, 123500)),
       <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% here are the children...</span>
       <span style="color: #004dd0; background-color: #ffffff;">[</span>person(ace, rothchild, born(2, january, 2010), unemployed)<span style="color: #004dd0; background-color: #ffffff;">]</span>).
</pre>
</div>

<p>
There are two families. Note that <code>person</code> is not a predicate, it's
just a way of writing data. We have no way of asking <code>person(X, Y,
...)</code> because it's not a predicate. To access person data, we have to
use the <code>family</code> predicate. Here are some examples:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- family(38463, <span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">Y</span>, <span style="color: #000000; background-color: #ffffff;">Z</span>).
<span style="color: #000000; background-color: #ffffff;">X</span> = person(susan, rothchild, born(13, september, 1972), works(osu, 75000)),
<span style="color: #000000; background-color: #ffffff;">Y</span> = person(jess, rothchild, born(20, july, 1975), works(nationwide, 123500)),
<span style="color: #000000; background-color: #ffffff;">Z</span> = <span style="color: #004dd0; background-color: #ffffff;">[</span>person(ace, rothchild, born(2, january, 2010), unemployed)<span style="color: #004dd0; background-color: #ffffff;">]</span>.

?- family(38463, person(<span style="color: #000000; background-color: #ffffff;">FirstName</span>, <span style="color: #000000; background-color: #ffffff;">LastName</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>), <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>).
<span style="color: #000000; background-color: #ffffff;">FirstName</span> = susan,
<span style="color: #000000; background-color: #ffffff;">LastName</span> = rothchild.

?- family(<span style="color: #000000; background-color: #ffffff;">ID</span>, person(susan, rothchild, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>), <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>).
<span style="color: #000000; background-color: #ffffff;">ID</span> = 38463.
</pre>
</div>

<p>
Using this <code>family</code> predicate, we just put a variable in a location
that we want to retrieve information about (such as family ID or a
first name / last name of a person), and put <code>_</code> for all the slots we
don't care about.
</p>

<p>
Now let's make it a little more interesting. Here is a <code>married</code>
predicate that says if two people are married:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">married</span>(<span style="color: #000000; background-color: #ffffff;">FirstName1</span>, <span style="color: #000000; background-color: #ffffff;">LastName1</span>, <span style="color: #000000; background-color: #ffffff;">FirstName2</span>, <span style="color: #000000; background-color: #ffffff;">LastName2</span>) :-
    family(<span style="color: #000000; background-color: #ffffff;">_</span>, person(<span style="color: #000000; background-color: #ffffff;">FirstName1</span>, <span style="color: #000000; background-color: #ffffff;">LastName1</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>),
           person(<span style="color: #000000; background-color: #ffffff;">FirstName2</span>, <span style="color: #000000; background-color: #ffffff;">LastName2</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>), <span style="color: #000000; background-color: #ffffff;">_</span>).

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">married</span>(<span style="color: #000000; background-color: #ffffff;">FirstName1</span>, <span style="color: #000000; background-color: #ffffff;">LastName1</span>, <span style="color: #000000; background-color: #ffffff;">FirstName2</span>, <span style="color: #000000; background-color: #ffffff;">LastName2</span>) :-
    family(<span style="color: #000000; background-color: #ffffff;">_</span>, person(<span style="color: #000000; background-color: #ffffff;">FirstName2</span>, <span style="color: #000000; background-color: #ffffff;">LastName2</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>),
           person(<span style="color: #000000; background-color: #ffffff;">FirstName1</span>, <span style="color: #000000; background-color: #ffffff;">LastName1</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>), <span style="color: #000000; background-color: #ffffff;">_</span>).
</pre>
</div>

<p>
And its use:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- married(tom, fox, ann, fox).
true .

?- married(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">Y</span>, ann, fox).
<span style="color: #000000; background-color: #ffffff;">X</span> = tom,
<span style="color: #000000; background-color: #ffffff;">Y</span> = fox .

?- married(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">Y</span>, <span style="color: #000000; background-color: #ffffff;">A</span>, <span style="color: #000000; background-color: #ffffff;">B</span>).
<span style="color: #000000; background-color: #ffffff;">X</span> = tom,
<span style="color: #000000; background-color: #ffffff;">Y</span> = fox,
<span style="color: #000000; background-color: #ffffff;">A</span> = ann,
<span style="color: #000000; background-color: #ffffff;">B</span> = fox <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = susan,
<span style="color: #000000; background-color: #ffffff;">Y</span> = rothchild,
<span style="color: #000000; background-color: #ffffff;">A</span> = jess,
<span style="color: #000000; background-color: #ffffff;">B</span> = rothchild .
</pre>
</div>

<p>
Here is a predicate for calculating household income. We can calculate
(simple math) using the <code>is</code> keyword:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">householdIncome</span>(<span style="color: #000000; background-color: #ffffff;">ID</span>, <span style="color: #000000; background-color: #ffffff;">Income</span>) :-
    family(<span style="color: #000000; background-color: #ffffff;">ID</span>, person(<span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, works(<span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">Income1</span>)),
           person(<span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, works(<span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">Income2</span>)), <span style="color: #000000; background-color: #ffffff;">_</span>),
    <span style="color: #000000; background-color: #ffffff;">Income</span> is <span style="color: #000000; background-color: #ffffff;">Income1</span> + <span style="color: #000000; background-color: #ffffff;">Income2</span>.
</pre>
</div>

<p>
And its use:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- householdIncome(38463, <span style="color: #000000; background-color: #ffffff;">X</span>).
<span style="color: #000000; background-color: #ffffff;">X</span> = 198500.

?- householdIncome(<span style="color: #000000; background-color: #ffffff;">X</span>, 198500).
<span style="color: #000000; background-color: #ffffff;">X</span> = 38463.

?- householdIncome(<span style="color: #000000; background-color: #ffffff;">X</span>, 999).
false.

?- householdIncome(<span style="color: #000000; background-color: #ffffff;">X</span>, <span style="color: #000000; background-color: #ffffff;">Y</span>).
<span style="color: #000000; background-color: #ffffff;">X</span> = 10392,
<span style="color: #000000; background-color: #ffffff;">Y</span> = 217000 <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = 38463,
<span style="color: #000000; background-color: #ffffff;">Y</span> = 198500.
</pre>
</div>

<p>
To facilitate further queries, we'll create an <code>exists</code> predicate that
we can use to retrieve details about a person. It just pulls person
information out of the various places it may appear in a <code>family</code>
fact.
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">exists</span>(<span style="color: #000000; background-color: #ffffff;">Person</span>) :- family(<span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">Person</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">exists</span>(<span style="color: #000000; background-color: #ffffff;">Person</span>) :- family(<span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">Person</span>, <span style="color: #000000; background-color: #ffffff;">_</span>).
<span style="color: #000000; background-color: #ffffff; font-weight: bold;">exists</span>(<span style="color: #000000; background-color: #ffffff;">Person</span>) :- family(<span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">Children</span>), member(<span style="color: #000000; background-color: #ffffff;">Person</span>, <span style="color: #000000; background-color: #ffffff;">Children</span>).
</pre>
</div>

<p>
We can use it like so:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- exists(<span style="color: #000000; background-color: #ffffff;">X</span>).
<span style="color: #000000; background-color: #ffffff;">X</span> = person(tom, fox, born(7, may, 1960), works(cnn, 152000)) <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = person(susan, rothchild, born(13, september, 1972), works(osu, 75000)) <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = person(ann, fox, born(19, april, 1961), works(nyu, 65000)) <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = person(jess, rothchild, born(20, july, 1975), works(nationwide, 123500)) <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = person(pat, fox, born(5, october, 1983), unemployed) <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = person(jim, fox, born(1, june, 1986), unemployed) <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = person(amy, fox, born(17, december, 1990), unemployed) <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = person(ace, rothchild, born(2, january, 2010), unemployed).

?- exists(person(<span style="color: #000000; background-color: #ffffff;">X</span>, fox, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>)).
<span style="color: #000000; background-color: #ffffff;">X</span> = tom <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = ann <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = pat <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = jim <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">X</span> = amy .

?- exists(person(<span style="color: #000000; background-color: #ffffff;">FirstName</span>, <span style="color: #000000; background-color: #ffffff;">LastName</span>, born(<span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, 1972), <span style="color: #000000; background-color: #ffffff;">_</span>)).
<span style="color: #000000; background-color: #ffffff;">FirstName</span> = susan,
<span style="color: #000000; background-color: #ffffff;">LastName</span> = rothchild .

?- exists(person(<span style="color: #000000; background-color: #ffffff;">FirstName</span>, <span style="color: #000000; background-color: #ffffff;">LastName</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, unemployed)).
<span style="color: #000000; background-color: #ffffff;">FirstName</span> = pat,
<span style="color: #000000; background-color: #ffffff;">LastName</span> = fox <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">FirstName</span> = jim,
<span style="color: #000000; background-color: #ffffff;">LastName</span> = fox <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">FirstName</span> = amy,
<span style="color: #000000; background-color: #ffffff;">LastName</span> = fox <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">FirstName</span> = ace,
<span style="color: #000000; background-color: #ffffff;">LastName</span> = rothchild.
</pre>
</div>

<p>
Let's get a little more sophisticated. Here is an interesting query:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">Find all people born after 1980 who do not work at OSU</span>

?- exists(person(<span style="color: #000000; background-color: #ffffff;">FirstName</span>, <span style="color: #000000; background-color: #ffffff;">LastName</span>, born(<span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">Year</span>), <span style="color: #000000; background-color: #ffffff;">Job</span>)),
      <span style="color: #000000; background-color: #ffffff;">Year</span> &gt; 1980, <span style="color: #000000; background-color: #ffffff;">Job</span> \= osu.

<span style="color: #000000; background-color: #ffffff;">FirstName</span> = pat,
<span style="color: #000000; background-color: #ffffff;">LastName</span> = fox,
<span style="color: #000000; background-color: #ffffff;">Year</span> = 1983,
<span style="color: #000000; background-color: #ffffff;">Job</span> = unemployed <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">FirstName</span> = jim,
<span style="color: #000000; background-color: #ffffff;">LastName</span> = fox,
<span style="color: #000000; background-color: #ffffff;">Year</span> = 1986,
<span style="color: #000000; background-color: #ffffff;">Job</span> = unemployed <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">FirstName</span> = amy,
<span style="color: #000000; background-color: #ffffff;">LastName</span> = fox,
<span style="color: #000000; background-color: #ffffff;">Year</span> = 1990,
<span style="color: #000000; background-color: #ffffff;">Job</span> = unemployed <span style="color: #004dd0; background-color: #ffffff;">;</span>
<span style="color: #000000; background-color: #ffffff;">FirstName</span> = ace,
<span style="color: #000000; background-color: #ffffff;">LastName</span> = rothchild,
<span style="color: #000000; background-color: #ffffff;">Year</span> = 2010,
<span style="color: #000000; background-color: #ffffff;">Job</span> = unemployed.
</pre>
</div>

<p>
Let's add a <code>householdSize</code> predicate. It "counts" the number of
children and adds 2 (for the parents):
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #000000; background-color: #ffffff; font-weight: bold;">householdSize</span>(<span style="color: #000000; background-color: #ffffff;">ID</span>, <span style="color: #000000; background-color: #ffffff;">Size</span>) :-
    family(<span style="color: #000000; background-color: #ffffff;">ID</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">Children</span>),
    length(<span style="color: #000000; background-color: #ffffff;">Children</span>, <span style="color: #000000; background-color: #ffffff;">ChildrenCount</span>),
    <span style="color: #000000; background-color: #ffffff;">Size</span> is 2 + <span style="color: #000000; background-color: #ffffff;">ChildrenCount</span>.
</pre>
</div>

<p>
We can use an interesting built-in predicate, <code>findall</code>, that finds a
list of objects that match some "goal." Here is its use in a query:
</p>

<div class="org-src-container">

<pre class="src src-prolog"><span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">First part of findall is what to collect,</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">second part is the </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">"goal"</span><span style="color: #00005d; background-color: #ffffff; font-style: italic;"> (a predicate),</span>
<span style="color: #00005d; background-color: #ffffff; font-style: italic;">% </span><span style="color: #00005d; background-color: #ffffff; font-style: italic;">third part is the name of the resulting list</span>
?- findall(<span style="color: #000000; background-color: #ffffff;">FirstName</span>, exists(person(<span style="color: #000000; background-color: #ffffff;">FirstName</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>)), <span style="color: #000000; background-color: #ffffff;">Result</span>).
<span style="color: #000000; background-color: #ffffff;">Result</span> = <span style="color: #004dd0; background-color: #ffffff;">[</span>tom, susan, ann, jess, pat, jim, amy, ace<span style="color: #004dd0; background-color: #ffffff;">]</span>.
</pre>
</div>

<p>
Of course, we can count the list:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- findall(<span style="color: #000000; background-color: #ffffff;">FirstName</span>, exists(person(<span style="color: #000000; background-color: #ffffff;">FirstName</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">_</span>)), <span style="color: #000000; background-color: #ffffff;">Result</span>),
       length(<span style="color: #000000; background-color: #ffffff;">Result</span>, <span style="color: #000000; background-color: #ffffff;">N</span>).
<span style="color: #000000; background-color: #ffffff;">Result</span> = <span style="color: #004dd0; background-color: #ffffff;">[</span>tom, susan, ann, jess, pat, jim, amy, ace<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #000000; background-color: #ffffff;">N</span> = 8.
</pre>
</div>

<p>
If we get a list of numbers, we can sum or average them. We'll need to
load a Prolog library, however. Here is some code in a database file:
</p>

<div class="org-src-container">

<pre class="src src-prolog">:- <span style="color: #000000; background-color: #ffffff; font-weight: bold;">use_module</span>(library(lists)). <span style="color: #00005d; background-color: #ffffff; font-style: italic;">% load lists library for sumlist predicate</span>

<span style="color: #000000; background-color: #ffffff; font-weight: bold;">average</span>(<span style="color: #000000; background-color: #ffffff;">List</span>, <span style="color: #000000; background-color: #ffffff;">Avg</span>) :-
    sumlist(<span style="color: #000000; background-color: #ffffff;">List</span>, <span style="color: #000000; background-color: #ffffff;">Sum</span>),
    length(<span style="color: #000000; background-color: #ffffff;">List</span>, <span style="color: #000000; background-color: #ffffff;">N</span>),
    <span style="color: #000000; background-color: #ffffff;">Avg</span> is <span style="color: #000000; background-color: #ffffff;">Sum</span> / <span style="color: #000000; background-color: #ffffff;">N</span>.
</pre>
</div>

<p>
Here is a use:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- average(<span style="color: #004dd0; background-color: #ffffff;">[</span>1, 3, 4.2, 4.5<span style="color: #004dd0; background-color: #ffffff;">]</span>, <span style="color: #000000; background-color: #ffffff;">Avg</span>).
<span style="color: #000000; background-color: #ffffff;">Avg</span> = 3.175.
</pre>
</div>

<p>
Ok, now let's grab household incomes and average them. In query mode:
</p>

<div class="org-src-container">

<pre class="src src-prolog">?- findall(<span style="color: #000000; background-color: #ffffff;">Income</span>, householdIncome(<span style="color: #000000; background-color: #ffffff;">_</span>, <span style="color: #000000; background-color: #ffffff;">Income</span>), <span style="color: #000000; background-color: #ffffff;">Result</span>), average(<span style="color: #000000; background-color: #ffffff;">Result</span>, <span style="color: #000000; background-color: #ffffff;">Avg</span>).
<span style="color: #000000; background-color: #ffffff;">Result</span> = <span style="color: #004dd0; background-color: #ffffff;">[</span>217000, 198500<span style="color: #004dd0; background-color: #ffffff;">]</span>,
<span style="color: #000000; background-color: #ffffff;">Avg</span> = 207750.
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">Prolog by other names</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li><a href="http://pyke.sourceforge.net/">Python Pyke</a>
</li>
<li><a href="https://github.com/clojure/core.logic">core.logic</a> for Clojure
</li>
<li><a href="http://docs.racket-lang.org/racklog/">Racklog</a>, logic programming for Racket (Scheme)
</li>
<li><a href="http://sourceforge.net/projects/cs-prolog/">C# Prolog</a> &#x2014; use Prolog inside your C# programs
</li>
<li>Translate your Prolog code to Java with <a href="http://kaminari.istc.kobe-u.ac.jp/PrologCafe/">PrologCafe</a>
</li>
</ul>

<div style="font-size: 80%; clear: both;"> <span
xmlns:dct="http://purl.org/dc/terms/"
href="http://purl.org/dc/dcmitype/Text" property="dct:title"
rel="dct:type">Intro to AI material</span> by <a
xmlns:cc="http://creativecommons.org/ns#"
href="http://cse3521.artifice.cc" property="cc:attributionName"
rel="cc:attributionURL">Joshua Eckroth</a> is licensed under a <a
rel="license"
href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons
Attribution-ShareAlike 3.0 Unported License</a>. Source code for this
website available at <a
href="https://github.com/joshuaeckroth/cse3521-website">GitHub</a>.
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-23971505-3', 'artifice.cc');
  ga('send', 'pageview');

</script>

<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

<script type="text/javascript">
$('.hidden .hidden-content').hide();
$('.hidden > strong').click(function() {
  $(this).parent().find('.hidden-content').toggle();
});
</script>
</div>
</div>
</div>
</body>
</html>
